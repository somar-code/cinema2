import{r as h,o as B,n as C,a as P,w as H,b as N,c as z,u as F,d as n,e as p,f as E,g as M,t as k,h as O,H as b,B as V,I as L,i as X,j as T,k as $,l as j,m as q,_ as K,p as m,q as w,s as f,v as U,x as W,y as u,F as Z,z as G,A as g,C as y,D as J}from"./index-DPOGhdlu.js";const Q=(e,l)=>{const t=h(),a=()=>{t.value=F(e).height};return B(()=>{C(a);for(let i=1;i<=3;i++)setTimeout(a,100*i)}),P(()=>C(a)),H([N,z],a),t};function Y(e,l){const t=Q(e);return a=>n("div",{class:l("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[a()])}const[ee,s]=p("nav-bar"),te={title:String,fixed:Boolean,zIndex:M,border:k,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:k};var ae=E({name:ee,props:te,emits:["clickLeft","clickRight"],setup(e,{emit:l,slots:t}){const a=h(),i=Y(a,s),o=d=>{e.leftDisabled||l("clickLeft",d)},v=d=>{e.rightDisabled||l("clickRight",d)},r=()=>t.left?t.left():[e.leftArrow&&n(L,{class:s("arrow"),name:"arrow-left"},null),e.leftText&&n("span",{class:s("text")},[e.leftText])],c=()=>t.right?t.right():n("span",{class:s("text")},[e.rightText]),x=()=>{const{title:d,fixed:I,border:D,zIndex:S}=e,_=O(S),R=e.leftArrow||e.leftText||t.left,A=e.rightText||t.right;return n("div",{ref:a,style:_,class:[s({fixed:I}),{[V]:D,"van-safe-area-top":e.safeAreaInsetTop}]},[n("div",{class:s("content")},[R&&n("div",{class:[s("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?b:""],onClick:o},[r()]),n("div",{class:[s("title"),"van-ellipsis"]},[t.title?t.title():d]),A&&n("div",{class:[s("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?b:""],onClick:v},[c()])])])};return()=>e.fixed&&e.placeholder?i(x):x()}});const ie=X(ae),ne=T(),le=$("cinema",()=>{const e=h([]),l=async()=>{var i=await q({url:`https://m.maizuo.com/gateway?cityId=${ne.cityId}&ticketFlag=1&k=5385023`,headers:{"X-Client-Info":'{"a":"3000","ch":"1002","v":"5.2.1","e":"16784170161263416169725953","bc":"110100"}',"X-Host":"mall.film-ticket.cinema.list"}});e.value=i.data.data.cinemas},t=j(()=>i=>e.value.filter(o=>o.eTicketFlag===i));return{cinemaList:e,getCinemaList:l,clearCinemaList:()=>{e.value=[]},filterCinemaList:t}}),se={__name:"Cinemas",setup(e){const l=J(),t=h(1),a=le(),i=T();B(()=>{a.cinemaList.length===0?a.getCinemaList():console.log("缓存")});const o=()=>{l.push("/city"),a.clearCinemaList()};return(v,r)=>(g(),m("div",null,[n(f(ie),{title:"影院"},{left:w(()=>[u("div",{onClick:o},y(f(i).cityName),1)]),right:w(()=>[n(f(L),{name:"search",size:"22",color:"black"})]),_:1}),U(u("select",{"onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c)},r[1]||(r[1]=[u("option",{value:1},"App订票",-1),u("option",{value:0},"前台兑换",-1)]),512),[[W,t.value]]),u("ul",null,[(g(!0),m(Z,null,G(f(a).filterCinemaList(t.value),c=>(g(),m("li",{key:c.cinemaId},y(c.name),1))),128))])]))}},ce=K(se,[["__scopeId","data-v-cdda420d"]]);export{ce as default};
